<html>

  <head>
      <meta charset="utf-8">
      <title>Data Buku</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  </head>

  <body>
      <div class="container mt-4">
          <h2>Buku</h2>
          <div class="text-right my-2">
              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addPostModal">
                  Buku Baru
              </button>
          </div>
          <div class="my-2">
              <table class="table">
                  <thead>
                      <tr>
                          <th>ID</th>
                          <td>Judul Buku</td>
                          <td>Nama Pengarang</td>
                          <td>Action</td>
                      </tr>
                  </thead>
                  <tbody>
                      {{#each buku}}
                      <tr>
                          <td>{{ id_buku }}</td>
                          <td>{{ judul_buku }}</td>
                          <td>{{ nama_pengarang }}</td>
                          <td>
                              <button type="button" class="btn btn-warning btn-sm m-1 edit-post" data-id_buku="{{ id_buku }}" data-judul_buku="{{ judul_buku }}" data-nama_pengarang="{{ nama_pengarang }}">Edit</button>
                              <button type="button" class="btn btn-danger btn-sm m-1 delete-post" data-id_buku="{{ id_buku }}">Delete</button>
                          </td>
                      </tr>
                      {{/each}}
                  </tbody>
              </table>
          </div>
      </div>

      <div id="addPostModal" class="modal fade">
          <div class="modal-dialog modal-dialog-centered modal-lg">
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Tambah Buku Baru</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/buku" method="POST">
                          <div class="form-group">
                              <label for="judul_buku">Judul Buku</label>
                              <input type="text" class="form-control" name="judul_buku" id="judul_buku">
                          </div>
                          <div class="form-group">
                              <label for="nama_pengarang">Nama Pengarang</label>
                              <input type="text" class="form-control" name="nama_pengarang" id="nama_pengarang">
                          </div>
                          <div class="form-group text-center">
                              <button class="btn btn-primary" type="submit">Simpan Buku</button>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <div id="editPostModal" class="modal fade">
          <div class="modal-dialog modal-dialog-centered modal-lg">
              <div class="modal-content">
                  <div class="modal-header">
                      <div class="modal-title">Edit Buku</div>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/buku/edit" method="POST">
                          <input type="hidden" name="id_buku" id="edit_id">
                          <div class="form-group">
                              <label for="edit_judul_buku">Judul Buku</label>
                              <input type="text" class="form-control" name="judul_buku" id="edit_judul_buku">
                          </div>
                          <div class="form-group">
                              <label for="edit_nama_pengarang">Nama Pengarang</label>
                              <input type="text" class="form-control" name="nama_pengarang" id="edit_nama_pengarang">
                          </div>
                          <div class="form-group text-center">
                              <button class="btn btn-primary" type="submit">Perbarui Buku</button>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <div id="deletePostModal" class="modal fade">
          <div class="modal-dialog modal-dialog-centered modal-lg">
              <div class="modal-content">
                  <div class="modal-header">
                      <div class="modal-title">Konfirmasi hapus buku</div>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/buku/delete" method="POST">
                          <div class="form-group">
                              <p>Apakah anda yakin ingin menghapus buku ini ?</p>
                              <input type="hidden" id="delete_id" name="id_buku">
                          </div>
                          <div class="form-group text-center">
                              <button class="btn btn-primary" type="submit">Hapus Buku</button>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
      
      <script>
          $('.edit-post').on('click', function () {
              var id_buku = $(this).data('id_buku')
              var judul_buku = $(this).data('judul_buku')
              var nama_pengarang = $(this).data('nama_pengarang')

              $('#editPostModal').modal('show')
              
              $('#edit_id').val(id_buku)
              $('#edit_judul_buku').val(judul_buku)
              $('#edit_nama_pengarang').val(nama_pengarang)
          })

          $('.delete-post').on('click', function () {
              var id_buku = $(this).data('id_buku')

              $('#deletePostModal').modal('show')

              $('#delete_id').val(id_buku)
          })
      </script>
  </body>

  </html>
